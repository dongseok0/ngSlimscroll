angular.module("jkuri.slimscroll",[]).directive("ngSlimscroll",["$document","$window","$compile",function(c,b,a){var d=function(h,g,f){var e=undefined;if(f.height!==0&&f.height!==undefined){e=f.height}else{if(g[0].clientHeight!==0){e=g[0].clientHeight}else{e=250}}h.width=f.width||g[0].clientWidth||"auto";h.height=e;h.size=f.size||"7px";h.color=f.color||"#000";h.position=f.position||"right";h.distance=f.distance||"1px";h.borderRadius=f.borderRadius||"3px";h.start=f.start||"top";h.alwaysVisible=h.$eval(f.alwaysVisible)||true;h.barDraggable=h.$eval(f.barDraggable)||true;h.wheelStep=f.wheelStep||20;h.opacity=f.opacity||0.5;h.enabled=h.$eval(f.enabled)||true;h.horizontalScroll=h.$eval(f.horizontalScroll)||false;h.horizontalScrollPosition=f.horizontalScrollPosition||"bottom"};return{restrict:"A",scope:true,link:function(r,m,q){d(r,m,q);var i=m[0];var g=30,l,h=false,e=false,j,p=30;m.css({overflow:"hidden",width:r.width+"px",height:r.height+"px"});var f=angular.element("<div></div>");f.css({position:"relative",overflow:"hidden",width:r.width+"px",height:r.height+"px"});if(!r.horizontalScroll){var n=angular.element('<div ng-mousedown="makeBarDraggable($event)""></div>');n.css({background:r.color,width:r.size,position:"absolute",top:"0",opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,"z-index":"99",cursor:"pointer"});var k=(r.position==="right")?{right:r.distance}:{left:r.distance};n.css(k)}else{var n=angular.element('<div ng-mousedown="makeBarDraggableHorizontal($event)"></div>');n.css({background:r.color,height:r.size,position:"absolute",left:"0",opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,"z-index":"99",cursor:"pointer"});var k=(r.horizontalScrollPosition==="bottom")?{bottom:r.distance}:{top:r.distance};n.css(k)}m.wrap(f);m.append(n);a(n)(r);r.makeBarDraggable=function(){n.bind("mousedown",function(v){var u=parseFloat(n.css("top")),s=v.pageY,t=true;c.bind("mousemove",function(w){n.css({top:u+w.pageY-s+"px"});r.scrollContent(0,n[0].offsetTop,false)});c.bind("mouseup",function(w){t=false;c.unbind("mousemove")});return}).bind("selectstart",function(s){s.preventDefault();s.stopPropagation();return false})};r.makeBarDraggableHorizontal=function(){n.bind("mousedown",function(v){var u=parseFloat(n.css("left")),s=v.pageX,t=true;c.bind("mousemove",function(w){n.css({left:u+w.pageX-s+"px"});r.scrollContentHorizontal(0,n[0].offsetLeft,false)});c.bind("mouseup",function(w){t=false;c.unbind("mousemove")});return}).bind("selectstart",function(s){s.preventDefault();s.stopPropagation();return false})};r.getBarHeight=function(){var t=Math.max((i.offsetHeight/i.scrollHeight)*i.offsetHeight,g);n.css({height:t+"px"});var s=t===i.offsetHeight?"none":"block";n.css({display:s})};r.getBarWidth=function(){var s=Math.max((i.offsetWidth/i.scrollWidth)*i.offsetWidth,p);n.css({width:s+"px"});var t=s===i.offsetWidth?"none":"block";n.css({display:t})};r.attachWheel=function(s){if(b.addEventListener){s.addEventListener("DOMMouseScroll",r.onWheel,false);s.addEventListener("mousewheel",r.onWheel,false)}else{c.addEventListener("onmousewheel",r.onWheel)}};r.detachWheel=function(s){if(b.removeEventListener){s.removeEventListener("DOMMouseScroll",r.onWheel,false);s.removeEventListener("mousewheel",r.onWheel,false)}else{c.removeEventListener("onmousewheel",r.wheel)}};r.onWheel=function(t){var t=t||b.event;var u=0;if(t.wheelDelta){u=-t.wheelDelta/120}if(t.detail){u=t.detail/3}var s=t.target||t.srcTarget||t.srcElement;if(!r.horizontalScroll){r.scrollContent(u,true)}else{r.scrollContentHorizontal(u,true)}if(t.preventDefault&&!h){t.preventDefault()}if(!h){t.returnValue=false}};r.scrollContent=function(z,u,s){h=false;var x=z,w=i.offsetHeight-n[0].offsetHeight,v,t;if(u){x=parseInt(n.css("top"),10)+z*parseInt(r.wheelStep,10)/100*n[0].offsetHeight;x=Math.min(Math.max(x,0),w);x=(z>0)?Math.ceil(x):Math.floor(x);n.css({top:x+"px"})}v=parseInt(n.css("top"),10)/(i.offsetHeight-n[0].offsetHeight);x=v*(i.scrollHeight-i.offsetHeight);i.scrollTop=x};r.scrollContentHorizontal=function(s,w,u){h=false;var z=s,v=i.offsetWidth-n[0].offsetWidth,y,t;if(w){z=parseInt(n.css("left"),10)+s*parseInt(r.wheelStep,10)/100*n[0].offsetWidth;z=Math.min(Math.max(z,0),v);z=(s>0)?Math.ceil(z):Math.floor(z);n.css({left:z+"px"})}y=parseInt(n.css("left"),10)/(i.offsetWidth-n[0].offsetWidth);z=y*(i.scrollWidth-i.offsetWidth);i.scrollLeft=z};n.bind("touchstart",function(t,s){if(t.originalEvent.touches.length){j=t.originalEvent.touches[0].pageY}});n.bind("touchmove",function(t){if(!h){t.originalEvent.preventDefault()}if(t.originalEvent.touches.length){var s=(j-t.originalEvent.touches[0].pageY)/o.touchScrollStep;scrollContent(s,true);j=t.originalEvent.touches[0].pageY}});q.$observe("enabled",function(){r.enabled=r.$eval(q.enabled);if(r.enabled===false){n.remove();r.detachWheel(i)}else{m.append(n);r.attachWheel(i)}});if(!r.horizontalScroll){r.getBarHeight();r.makeBarDraggable()}else{r.getBarWidth();r.makeBarDraggableHorizontal()}r.attachWheel(i)}}}]);